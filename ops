{"author":{"id":"ff90e8c1032712f76e3c119e253ae3a84614b47da224d1a3450b4f469b0523a9"},"ops":[{"type":3,"timestamp":1724487790,"nonce":"hIFw2ynVuO4QRtghdJqFSoWbPZ4=","metadata":{"github-id":"IC_kwDOBLCY8M6JlCOj","github-url":"https://github.com/svpcom/wfb-ng/issues/365#issuecomment-2308187043"},"message":"@zhouruixi  Thanks for your dumps. They help me a lot to find root of this bug.\n\nQuick solution for IPQ8074 is patch rx.cpp: \n```\n@@ -242,7 +243,8 @@ void Receiver::loop_iter(void)\n         /* discard the radiotap header part */\n         pkt += iterator._max_length;\n         pktlen -= iterator._max_length;\n-\n+        pktlen -= 8 ;\n+        \n         //fprintf(stderr, \"CAPTURE: mcs: %u, bw: %u\\n\", mcs_index, bandwidth);\n         if (pktlen \u003e (int)sizeof(ieee80211_header))\n         {\n```\nbut I've not found a good way to distinguish bad and good cards during run time.\nSo for quick and dirty solution you can add condition into code if interface name equals to \"bad card\" then do `pktlen -= 8 ;`","files":null},{"type":6,"timestamp":1724487862,"nonce":"NeURwepkDaMURaoGwzM7Lj+5Zr4=","metadata":{"github-id":"UCE_lALOBLCY8M6JlCOjzk4C0TA"},"target":"82ee1cf4ddf633528e58c8aac16c283af5358a038042e85ee9c7e7321beec425","message":"@zhouruixi  Thanks for your dumps. They help me a lot to find root of this bug.\n\nQuick solution for IPQ8074 is patch rx.cpp: \n```\n@@ -242,7 +243,8 @@ void Receiver::loop_iter(void)\n         /* discard the radiotap header part */\n         pkt += iterator._max_length;\n         pktlen -= iterator._max_length;\n+        pktlen -= 8 ;\n       \n         //fprintf(stderr, \"CAPTURE: mcs: %u, bw: %u\\n\", mcs_index, bandwidth);\n         if (pktlen \u003e (int)sizeof(ieee80211_header))\n         {\n```\nbut I've not found a good way to distinguish bad and good cards during run time.\nSo for quick and dirty solution you can add condition into code if interface name equals to \"bad card\" then do `pktlen -= 8 ;`","files":null},{"type":6,"timestamp":1724487883,"nonce":"kDHXQvlKyIafEN+UJW5KgAu4AJA=","metadata":{"github-id":"UCE_lALOBLCY8M6JlCOjzk4C0Xo"},"target":"82ee1cf4ddf633528e58c8aac16c283af5358a038042e85ee9c7e7321beec425","message":"@zhouruixi  Thanks for your dumps. They help me a lot to find root of this bug.\n\nQuick solution for IPQ8074 is patch rx.cpp: \n``` .diff\n@@ -242,7 +243,8 @@ void Receiver::loop_iter(void)\n         /* discard the radiotap header part */\n         pkt += iterator._max_length;\n         pktlen -= iterator._max_length;\n+        pktlen -= 8 ;\n       \n         //fprintf(stderr, \"CAPTURE: mcs: %u, bw: %u\\n\", mcs_index, bandwidth);\n         if (pktlen \u003e (int)sizeof(ieee80211_header))\n         {\n```\nbut I've not found a good way to distinguish bad and good cards during run time.\nSo for quick and dirty solution you can add condition into code if interface name equals to \"bad card\" then do `pktlen -= 8 ;`","files":null}]}