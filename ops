{"author":{"id":"018822160af4ec0627353c2536e0391b59141b7a2b5c6830ac409a8962edfed6"},"ops":[{"type":1,"timestamp":1675763833,"nonce":"9LXf1FMCAtEVXUbdOaEt3PZtaxs=","metadata":{"github-id":"I_kwDOBLCY8M5d0a3W","github-url":"https://github.com/svpcom/wfb-ng/issues/279","origin":"github"},"title":"[DESIGN] how to bypass up\u0026down camera control mavlink messages","message":"### Feature proposal\n\nMavlink has some builtin messages for controlling camera and reporting its status.\n\nIf proper messages will be passed through wfb, then we will be able to get following features:\n\n1. controlling camera in QGC and with remote control just like on \"casual drone\"\n2. standardized controlling of camera on the drone in the same standard manner that mavlink offers\n\nSo there are two separate tasks:\n\n1. pass status messages from the drone to GS where QGC will be able to handle them\n2. pass control messages from GS to some software on the drone\n\n### Downside camera status messages\n\nWFB has camera functionality out of the box, so it may look rather convenient if it will report camera existence out of the box and pass rtp udp url to GS. However, wfb is not a complete turn-key solution, it is a technology, so I suppose that this functionality should be designed as a preconfigured opt-in feature, rather than opt-out.\n\nSo as for me, sending CAMERA_INFORMATION by default is a very good idea, but it should be opt-in with some default configuration, because user can decide to create his own information message.\n\n### Upside camera control messages\n\nQGC can send commands from a joystick (or a headless multi-drone management system) to the drone.\nQuestion is: who is supposed to handle them?\n\nWhen fpv-camera is launched, it may be a good idea to bypass messages like MAV_CMD_DO_DIGICAM_CONFIGURE to the gstreamer, capturing video.\n\nWhen wfb is launched in an ethernet-proxy mode (when IP camera on the drone is sending video packets to the wfb), it may be better to launch some proxy that will translate mavlink commands to onvif commands.\n\nHere I see a question: what is the proper way to distribute mavlink messages from the ground? Some of them should be targeted to a flight controller, some of them must be handled by some user provided software.  Maybe the best option is a full mirror?  FC knows how to fly and my own software knows how to control gimbal, attached to a raspberry pi?","files":null}]}