{"author":{"id":"74f999d2d73027883a11efeb0eccb22ceb930680d8f3f61b22388f86a27fecba"},"ops":[{"type":1,"timestamp":1739128285,"nonce":"LT6JsxA3W+XwxMTrMNLyxbQJCrc=","metadata":{"github-id":"I_kwDOBLCY8M6pVK_D","github-url":"https://github.com/svpcom/wfb-ng/issues/404","origin":"github"},"title":"WFB-NG Support on Yocto in Docker (Kernel 6.6.54, Verdin iMX8M Plus) - DKMS Build Failing","message":"Does WFB-NG support running on a Yocto-based OS inside a Docker container?\n\n\nBoard: Toradex Verdin iMX8M Plus (running Yocto-based Toradex BSP).\n\nKernel: 6.6.54-7.1.0-g3493ccd66900 (aarch64).\n\nDocker Environment: Running inside a Docker container based on Ubuntu 24.04.\n\nIssue: Unable to compile WFB-NG driver inside the Docker container due to missing or incomplete kernel headers.\n\nThe same setup works fine on Ubuntu, but inside Yocto Docker, DKMS build fails due to missing headers or symbols.\n\n\nFirst Log Indicating Missing Headers:\n\nmake[1]: Entering directory '/usr/src/linux-headers-6.6.54-7.1.0-g3493ccd66900'\n/usr/src/linux-headers-6.6.54-7.1.0-g3493ccd66900/Makefile:741: include/config/auto.conf: No such file or directory\nmake[1]: *** [/usr/src/linux-headers-6.6.54-7.1.0-g3493ccd66900/Makefile:784: .config] Error 1\nmake: *** [Makefile:234: __sub-make] Error 2\n\nFollow-Up Log After Installing Headers inside the docker:\n\nWARNING: Module.symvers is missing.\nERROR: modpost: \"skb_pull\" [/var/lib/dkms/rtl8812au/5.2.20.2/build/88XXau_wfb.ko] undefined!\nERROR: modpost: \"rtnl_is_locked\" [/var/lib/dkms/rtl8812au/5.2.20.2/build/88XXau_wfb.ko] undefined!\nmake[3]: *** [scripts/Makefile.modpost:145: /var/lib/dkms/rtl8812au/5.2.20.2/build/Module.symvers] Error 1\nmake[2]: *** [/usr/src/linux-headers-6.6.54-7.1.0-g3493ccd66900/Makefile:1865: modpost] Error 2\n\nQuestion:\n\nHas anyone successfully compiled WFB-NG on Yocto inside Docker?\n\nAre there known issues with DKMS builds for custom Yocto kernels inside Docker?\n\nAny workarounds or suggestions for resolving the missing kernel headers and symbols?\n\nWe would really appreciate any insights or guidance on this. Thanks in advance!","files":null}]}