{"author":{"id":"f6e2c84cbd41daecf4582d969b556a96eb202b5bed142fd85d6e07732fc4fe19"},"ops":[{"type":3,"timestamp":1737888844,"nonce":"jpvbYynaB6y0WapyEiRa0QVXmJg=","metadata":{"github-id":"IC_kwDOBLCY8M6b02ot","github-url":"https://github.com/svpcom/wfb-ng/issues/399#issuecomment-2614323757"},"message":"I have tested with below changes, please help to check:\n\n\n```\ndaniel@daniel-nvidia:~/Work/jetson-fpv/module/wfb-ng$ git diff\ndiff --git a/scripts/install_gs.sh b/scripts/install_gs.sh\nindex c85faca..c188557 100755\n--- a/scripts/install_gs.sh\n+++ b/scripts/install_gs.sh\n@@ -38,11 +38,12 @@ mv gs.key /etc/gs.key\n if [ $auto_nics -eq 0 ]\n then\n     echo \"Saving WFB_NICS=\\\"$nics\\\" to /etc/default/wifibroadcast\"\n-    echo \"WFB_NICS=\\\"$nics\\\"\" \u003e /etc/default/wifibroadcast\n else\n-    echo \"Using wifi autodetection\"\n+    echo \"Using wifi autodetection WFB_NICS=\\\"$nics\\\"\"\n fi\n\n+echo \"WFB_NICS=\\\"$nics\\\"\" \u003e /etc/default/wifibroadcast\n+\n # Setup config\n cat \u003c\u003cEOF \u003e\u003e /etc/wifibroadcast.cfg\n [common]\ndaniel@daniel-nvidia:~/Work/jetson-fpv/module/wfb-ng$ git log -n 1\ncommit 33cbb3cd2b12a720eb7a0eb48e8a507c4ece007c (HEAD -\u003e master, origin/master, origin/HEAD)\nAuthor: Vasily Evseenko \u003csvpcom@gmail.com\u003e\nDate:   Sun Jan 26 01:41:15 2025 +0300\n\n    Add ability for manual override wifi autodetection #399\n```","files":null},{"type":6,"timestamp":1737888888,"nonce":"P5xwFkWTShduFuKltiS9MoqlpYw=","metadata":{"github-id":"UCE_lALOBLCY8M6b02otzlrKYhg"},"target":"78e9f97f70748534451eeea017da5c8e57036a185fdb2cada59c1cf0c035699e","message":"I have tested with below changes, please help to check:\n\n\n```\ndaniel@daniel-nvidia:~/Work/jetson-fpv/module/wfb-ng$ systemctl status wifibroadcast@gs.service\n● wifibroadcast@gs.service - WFB-ng standalone server, profile gs\n     Loaded: loaded (/lib/systemd/system/wifibroadcast@.service; enabled; vendor preset: enabled)\n     Active: active (running) since Sun 2025-01-26 18:52:37 CST; 6s ago\n   Main PID: 66388 (wfb-server)\n      Tasks: 7 (limit: 8809)\n     Memory: 41.5M\n        CPU: 941ms\n     CGroup: /system.slice/system-wifibroadcast.slice/wifibroadcast@gs.service\n             ├─66388 /usr/bin/python3 /usr/bin/wfb-server --profiles gs --wlans wlx200db032da3a\n             ├─66435 /usr/bin/wfb_rx -p 0 -c 127.0.0.1 -u 5600 -K /etc/gs.key -R 2097152 -l 1000 -i 7669206 wlx200db032da3a\n             ├─66436 /usr/bin/wfb_tx -f data -p 144 -u 0 -K /etc/gs.key -B 20 -G long -S 1 -L 1 -M 1 -k 1 -n 2 -T 0 -F 0 -i 7669206 -R 2097152 -l 1000 -C 0 wlx200db032\u003e\n             ├─66437 /usr/bin/wfb_tx -f data -p 160 -u 0 -K /etc/gs.key -B 20 -G long -S 1 -L 1 -M 1 -k 1 -n 2 -T 0 -F 0 -i 7669206 -R 2097152 -l 1000 -C 0 wlx200db032\u003e\n             ├─66438 /usr/bin/wfb_rx -p 16 -u 60463 -K /etc/gs.key -R 2097152 -l 1000 -i 7669206 wlx200db032da3a\n             └─66442 /usr/bin/wfb_rx -p 32 -u 35006 -K /etc/gs.key -R 2097152 -l 1000 -i 7669206 wlx200db032da3a\n\n1月 26 18:52:39 daniel-nvidia bash[66388]: [services.init_mavlink #info] mavlink use wfb_tx ports {0: 48003}, control_port 57538\n1月 26 18:52:39 daniel-nvidia bash[66388]: [udp.Port._bindSocket #info] MavlinkUDPProxyProtocol starting on 52126\n1月 26 18:52:39 daniel-nvidia bash[66388]: [udp.Port._bindSocket #info] UDPProxyProtocol starting on 50751\n1月 26 18:52:39 daniel-nvidia bash[66388]: [protocols.RXProtocol.connectionMade #info] Started mavlink rx\n1月 26 18:52:39 daniel-nvidia bash[66388]: [protocols.DbgProtocol.lineReceived #info] tunnel tx: Using data frames\n1月 26 18:52:39 daniel-nvidia bash[66388]: [protocols.DbgProtocol.lineReceived #info] tunnel tx: Listen on 34544 for wlx200db032da3a\n1月 26 18:52:39 daniel-nvidia bash[66388]: [protocols.DbgProtocol.lineReceived #info] tunnel tx: Listen on 51974 for management commands\n1月 26 18:52:39 daniel-nvidia bash[66388]: [services.init_tunnel #info] tunnel use wfb_tx ports {0: 34544}, control_port 51974\n1月 26 18:52:39 daniel-nvidia bash[66388]: [udp.Port._bindSocket #info] UDPProxyProtocol starting on 52094\n1月 26 18:52:39 daniel-nvidia bash[66388]: [protocols.RXProtocol.connectionMade #info] Started tunnel rx\n\ndaniel@daniel-nvidia:~/Work/jetson-fpv/module/wfb-ng$ git diff\ndiff --git a/scripts/install_gs.sh b/scripts/install_gs.sh\nindex c85faca..c188557 100755\n--- a/scripts/install_gs.sh\n+++ b/scripts/install_gs.sh\n@@ -38,11 +38,12 @@ mv gs.key /etc/gs.key\n if [ $auto_nics -eq 0 ]\n then\n     echo \"Saving WFB_NICS=\\\"$nics\\\" to /etc/default/wifibroadcast\"\n-    echo \"WFB_NICS=\\\"$nics\\\"\" \u003e /etc/default/wifibroadcast\n else\n-    echo \"Using wifi autodetection\"\n+    echo \"Using wifi autodetection WFB_NICS=\\\"$nics\\\"\"\n fi\n\n+echo \"WFB_NICS=\\\"$nics\\\"\" \u003e /etc/default/wifibroadcast\n+\n # Setup config\n cat \u003c\u003cEOF \u003e\u003e /etc/wifibroadcast.cfg\n [common]\ndaniel@daniel-nvidia:~/Work/jetson-fpv/module/wfb-ng$ git log -n 1\ncommit 33cbb3cd2b12a720eb7a0eb48e8a507c4ece007c (HEAD -\u003e master, origin/master, origin/HEAD)\nAuthor: Vasily Evseenko \u003csvpcom@gmail.com\u003e\nDate:   Sun Jan 26 01:41:15 2025 +0300\n\n    Add ability for manual override wifi autodetection #399\n```","files":null},{"type":6,"timestamp":1737888957,"nonce":"814lpuV+0BSgSDOx52XZrpcac2U=","metadata":{"github-id":"UCE_lALOBLCY8M6b02otzlrKY7U"},"target":"78e9f97f70748534451eeea017da5c8e57036a185fdb2cada59c1cf0c035699e","message":"I have tested with below changes, please help to check:\n\n\n```\ndaniel@daniel-nvidia:~/Work/jetson-fpv/module/wfb-ng$ sudo ./scripts/install_gs.sh\n...\ndpkg-deb: building package 'wfb-ng' in '../wfb-ng_25.1.25.81795-1_arm64.deb'.\ndpkg-deb: building package 'wfb-ng-dbgsym' in 'debian/.debhelper/scratch-space/build-wfb-ng/wfb-ng-dbgsym_25.1.25.81795-1_arm64.deb'.\n        Renaming wfb-ng-dbgsym_25.1.25.81795-1_arm64.deb to wfb-ng-dbgsym_25.1.25.81795-1_arm64.ddeb\nmake[1]: Leaving directory '/home/daniel/Work/jetson-fpv/module/wfb-ng/deb_dist/wfb-ng-25.1.25.81795'\n dpkg-genbuildinfo --build=binary -O../wfb-ng_25.1.25.81795-1_arm64.buildinfo\n dpkg-genchanges --build=binary -O../wfb-ng_25.1.25.81795-1_arm64.changes\ndpkg-genchanges: info: binary-only upload (no source code included)\n dpkg-source --after-build .\ndpkg-source: info: using options from wfb-ng-25.1.25.81795/debian/source/options: --extend-diff-ignore=\\.egg-info$\ndpkg-buildpackage: info: binary-only upload (no source included)\nrm -rf wfb_ng.egg-info/ wfb-ng-25.1.25.81795.tar.gz\nReading package lists... Done\nBuilding dependency tree... Done\nReading state information... Done\nNote, selecting 'wfb-ng' instead of './deb_dist/wfb-ng_25.1.25.81795-1_arm64.deb'\nwfb-ng is already the newest version (25.1.25.81795-1).\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\nDrone keypair (drone sec + gs pub) saved to drone.key\nGS keypair (gs sec + drone pub) saved to gs.key\nUsing wifi autodetection WFB_NICS=\"wlx200db032da3a\"\n● wifibroadcast@gs.service - WFB-ng standalone server, profile gs\n     Loaded: loaded (/lib/systemd/system/wifibroadcast@.service; enabled; vendor preset: enabled)\n     Active: active (running) since Sun 2025-01-26 18:52:37 CST; 13ms ago\n   Main PID: 66388 (wfb-server)\n      Tasks: 1 (limit: 8809)\n     Memory: 1.4M\n        CPU: 10ms\n     CGroup: /system.slice/system-wifibroadcast.slice/wifibroadcast@gs.service\n             └─66388 /usr/bin/python3 /usr/bin/wfb-server --profiles gs --wlans wlx200db032da3a\n\n1月 26 18:52:37 daniel-nvidia systemd[1]: Started WFB-ng standalone server, profile gs.\nGS setup successfully finished\n\ndaniel@daniel-nvidia:~/Work/jetson-fpv/module/wfb-ng$ systemctl status wifibroadcast@gs.service\n● wifibroadcast@gs.service - WFB-ng standalone server, profile gs\n     Loaded: loaded (/lib/systemd/system/wifibroadcast@.service; enabled; vendor preset: enabled)\n     Active: active (running) since Sun 2025-01-26 18:52:37 CST; 6s ago\n   Main PID: 66388 (wfb-server)\n      Tasks: 7 (limit: 8809)\n     Memory: 41.5M\n        CPU: 941ms\n     CGroup: /system.slice/system-wifibroadcast.slice/wifibroadcast@gs.service\n             ├─66388 /usr/bin/python3 /usr/bin/wfb-server --profiles gs --wlans wlx200db032da3a\n             ├─66435 /usr/bin/wfb_rx -p 0 -c 127.0.0.1 -u 5600 -K /etc/gs.key -R 2097152 -l 1000 -i 7669206 wlx200db032da3a\n             ├─66436 /usr/bin/wfb_tx -f data -p 144 -u 0 -K /etc/gs.key -B 20 -G long -S 1 -L 1 -M 1 -k 1 -n 2 -T 0 -F 0 -i 7669206 -R 2097152 -l 1000 -C 0 wlx200db032\u003e\n             ├─66437 /usr/bin/wfb_tx -f data -p 160 -u 0 -K /etc/gs.key -B 20 -G long -S 1 -L 1 -M 1 -k 1 -n 2 -T 0 -F 0 -i 7669206 -R 2097152 -l 1000 -C 0 wlx200db032\u003e\n             ├─66438 /usr/bin/wfb_rx -p 16 -u 60463 -K /etc/gs.key -R 2097152 -l 1000 -i 7669206 wlx200db032da3a\n             └─66442 /usr/bin/wfb_rx -p 32 -u 35006 -K /etc/gs.key -R 2097152 -l 1000 -i 7669206 wlx200db032da3a\n\n1月 26 18:52:39 daniel-nvidia bash[66388]: [services.init_mavlink #info] mavlink use wfb_tx ports {0: 48003}, control_port 57538\n1月 26 18:52:39 daniel-nvidia bash[66388]: [udp.Port._bindSocket #info] MavlinkUDPProxyProtocol starting on 52126\n1月 26 18:52:39 daniel-nvidia bash[66388]: [udp.Port._bindSocket #info] UDPProxyProtocol starting on 50751\n1月 26 18:52:39 daniel-nvidia bash[66388]: [protocols.RXProtocol.connectionMade #info] Started mavlink rx\n1月 26 18:52:39 daniel-nvidia bash[66388]: [protocols.DbgProtocol.lineReceived #info] tunnel tx: Using data frames\n1月 26 18:52:39 daniel-nvidia bash[66388]: [protocols.DbgProtocol.lineReceived #info] tunnel tx: Listen on 34544 for wlx200db032da3a\n1月 26 18:52:39 daniel-nvidia bash[66388]: [protocols.DbgProtocol.lineReceived #info] tunnel tx: Listen on 51974 for management commands\n1月 26 18:52:39 daniel-nvidia bash[66388]: [services.init_tunnel #info] tunnel use wfb_tx ports {0: 34544}, control_port 51974\n1月 26 18:52:39 daniel-nvidia bash[66388]: [udp.Port._bindSocket #info] UDPProxyProtocol starting on 52094\n1月 26 18:52:39 daniel-nvidia bash[66388]: [protocols.RXProtocol.connectionMade #info] Started tunnel rx\n\ndaniel@daniel-nvidia:~/Work/jetson-fpv/module/wfb-ng$ git diff\ndiff --git a/scripts/install_gs.sh b/scripts/install_gs.sh\nindex c85faca..c188557 100755\n--- a/scripts/install_gs.sh\n+++ b/scripts/install_gs.sh\n@@ -38,11 +38,12 @@ mv gs.key /etc/gs.key\n if [ $auto_nics -eq 0 ]\n then\n     echo \"Saving WFB_NICS=\\\"$nics\\\" to /etc/default/wifibroadcast\"\n-    echo \"WFB_NICS=\\\"$nics\\\"\" \u003e /etc/default/wifibroadcast\n else\n-    echo \"Using wifi autodetection\"\n+    echo \"Using wifi autodetection WFB_NICS=\\\"$nics\\\"\"\n fi\n\n+echo \"WFB_NICS=\\\"$nics\\\"\" \u003e /etc/default/wifibroadcast\n+\n # Setup config\n cat \u003c\u003cEOF \u003e\u003e /etc/wifibroadcast.cfg\n [common]\ndaniel@daniel-nvidia:~/Work/jetson-fpv/module/wfb-ng$ git log -n 1\ncommit 33cbb3cd2b12a720eb7a0eb48e8a507c4ece007c (HEAD -\u003e master, origin/master, origin/HEAD)\nAuthor: Vasily Evseenko \u003csvpcom@gmail.com\u003e\nDate:   Sun Jan 26 01:41:15 2025 +0300\n\n    Add ability for manual override wifi autodetection #399\n```","files":null}]}