{"author":{"id":"ae26fac8ccb805db2175a5f68935360a1ba4e71a79a9becc27bb2b263dab90bc"},"ops":[{"type":3,"timestamp":1561286172,"nonce":"S1XGbOABE2RvUY6wVInN5eKvDC0=","metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDUwNDczOTQ2Mg==","github-url":"https://github.com/svpcom/wfb-ng/issues/40#issuecomment-504739462"},"message":"Да, теперь всё работает. Телеметрия передаётся, туннель работает, видео идёт, но у меня не получается использовать 40mb bandwidth и 13 канал.\n\nПри попытке переключиться на 40мб происходит это:\n```\nsudo python -m telemetry.server drone wlx30144a002943\n2019-06-23 10:18:12+0000 [-] Log opened.\n2019-06-23 10:18:12+0000 [-] # iw reg set GY\n2019-06-23 10:18:12+0000 [-] # ifconfig wlx30144a002943 down\n2019-06-23 10:18:12+0000 [-] # iw dev wlx30144a002943 set monitor otherbss\n2019-06-23 10:18:13+0000 [-] # ifconfig wlx30144a002943 up\n2019-06-23 10:18:13+0000 [-] # iw dev wlx30144a002943 set channel 9 HT40+\n2019-06-23 10:18:13+0000 [-] Listen for telem stream 1(RX), 2(TX) on 0.0.0.0:14550\n2019-06-23 10:18:13+0000 [-] UDPProxyProtocol starting on 14550\n2019-06-23 10:18:13+0000 [-] UDPProxyProtocol starting on 14700\n2019-06-23 10:18:13+0000 [-] UDPProxyProtocol starting on 38402\n2019-06-23 10:18:13+0000 [-] Telem RX: /usr/bin/wfb_rx -p 1 -u 14700 -K /etc/drone.key -k 1 -n 2 wlx30144a002943\n2019-06-23 10:18:13+0000 [-] Telem TX: /usr/bin/wfb_tx -p 2 -u 14701 -K /etc/drone.key -B 20 -G long -S 0 -L 0 -M 1 -k 1 -n 2 wlx30144a002943\n2019-06-23 10:18:13+0000 [-] Started telem rx\n2019-06-23 10:18:13+0000 [-] Started telem tx\n2019-06-23 10:18:13+0000 [-] Listen for video stream 3 on 0.0.0.0:5602\n2019-06-23 10:18:13+0000 [-] Started video tx\n2019-06-23 10:18:13+0000 [-] Video: /usr/bin/wfb_tx -p 3 -u 5602 -K /etc/drone.key -B 40 -G short -S 1 -L 0 -M 23 -k 8 -n 12 wlx30144a002943\n2019-06-23 10:18:13+0000 [-] UDPProxyProtocol starting on 14900\n2019-06-23 10:18:13+0000 [-] UDPProxyProtocol starting on 44025\n2019-06-23 10:18:13+0000 [-] Tunnel RX: /usr/bin/wfb_rx -p 4 -u 14900 -K /etc/drone.key -k 1 -n 2 wlx30144a002943\n2019-06-23 10:18:13+0000 [-] Tunnel TX: /usr/bin/wfb_tx -p 5 -u 14901 -K /etc/drone.key -B 20 -G long -S 1 -L 0 -M 1 -k 1 -n 2 wlx30144a002943\n2019-06-23 10:18:13+0000 [-] Started tunnel rx\n2019-06-23 10:18:13+0000 [-] Started tunnel tx\n2019-06-23 10:18:13+0000 [-] telem tx: Listen on 14701 for wlx30144a002943\n2019-06-23 10:18:13+0000 [-] telem rx: wlx30144a002943 has DLT_IEEE802_11_RADIO Encap\n2019-06-23 10:18:13+0000 [-] video tx: Listen on 5602 for wlx30144a002943\n2019-06-23 10:18:13+0000 [-] tunnel tx: Listen on 14901 for wlx30144a002943\n2019-06-23 10:18:13+0000 [-] tunnel rx: wlx30144a002943 has DLT_IEEE802_11_RADIO Encap\n2019-06-23 10:18:13+0000 [-] tunnel rx: New session detected\n2019-06-23 10:18:13+0000 [-] tunnel rx: 484 packets lost\n2019-06-23 10:18:20+0000 [-] tunnel rx: Error: socket error!\n2019-06-23 10:18:20+0000 [-] telem rx: Error: socket error!\n2019-06-23 10:18:20+0000 [-] Stopped RX tunnel rx with code 1\n2019-06-23 10:18:20+0000 [-] Stopping reactor due to fatal error: A process has ended with a probable error condition: process ended with exit code 1.\n2019-06-23 10:18:20+0000 [-] (UDP Port 14900 Closed)\n2019-06-23 10:18:20+0000 [-] (UDP Port 44025 Closed)\n2019-06-23 10:18:20+0000 [UDPProxyProtocol (UDP)] (UDP Port 14550 Closed)\n2019-06-23 10:18:20+0000 [UDPProxyProtocol (UDP)] (UDP Port 14700 Closed)\n2019-06-23 10:18:20+0000 [UDPProxyProtocol (UDP)] (UDP Port 38402 Closed)\n2019-06-23 10:18:20+0000 [-] Stopped RX telem rx with code 1\n2019-06-23 10:18:20+0000 [-] Main loop terminated.\n2019-06-23 10:18:20+0000 [-] Exiting with code 1\n\n```\nПри попытке использования 13го канала\n```\n sudo python -m telemetry.server drone wlx30144a002943\n2019-06-23 10:30:27+0000 [-] Log opened.\n2019-06-23 10:30:27+0000 [-] # iw reg set GY\n2019-06-23 10:30:27+0000 [-] # ifconfig wlx30144a002943 down\n2019-06-23 10:30:27+0000 [-] # iw dev wlx30144a002943 set monitor otherbss\n2019-06-23 10:30:27+0000 [-] # ifconfig wlx30144a002943 up\n2019-06-23 10:30:27+0000 [-] # iw dev wlx30144a002943 set channel 13 HT20\n2019-06-23 10:30:27+0000 [-] Listen for telem stream 1(RX), 2(TX) on 0.0.0.0:14550\n2019-06-23 10:30:27+0000 [-] UDPProxyProtocol starting on 14550\n2019-06-23 10:30:27+0000 [-] UDPProxyProtocol starting on 14700\n2019-06-23 10:30:27+0000 [-] UDPProxyProtocol starting on 41855\n2019-06-23 10:30:27+0000 [-] Telem RX: /usr/bin/wfb_rx -p 1 -u 14700 -K /etc/drone.key -k 1 -n 2 wlx30144a002943\n2019-06-23 10:30:27+0000 [-] Telem TX: /usr/bin/wfb_tx -p 2 -u 14701 -K /etc/drone.key -B 20 -G long -S 0 -L 0 -M 1 -k 1 -n 2 wlx30144a002943\n2019-06-23 10:30:27+0000 [-] Started telem rx\n2019-06-23 10:30:27+0000 [-] Started telem tx\n2019-06-23 10:30:27+0000 [-] Listen for video stream 3 on 0.0.0.0:5602\n2019-06-23 10:30:27+0000 [-] Started video tx\n2019-06-23 10:30:27+0000 [-] Video: /usr/bin/wfb_tx -p 3 -u 5602 -K /etc/drone.key -B 20 -G short -S 1 -L 0 -M 31 -k 8 -n 12 wlx30144a002943\n2019-06-23 10:30:28+0000 [-] UDPProxyProtocol starting on 14900\n2019-06-23 10:30:28+0000 [-] UDPProxyProtocol starting on 53005\n2019-06-23 10:30:28+0000 [-] Tunnel RX: /usr/bin/wfb_rx -p 4 -u 14900 -K /etc/drone.key -k 1 -n 2 wlx30144a002943\n2019-06-23 10:30:28+0000 [-] Tunnel TX: /usr/bin/wfb_tx -p 5 -u 14901 -K /etc/drone.key -B 20 -G long -S 1 -L 0 -M 1 -k 1 -n 2 wlx30144a002943\n2019-06-23 10:30:28+0000 [-] Started tunnel rx\n2019-06-23 10:30:28+0000 [-] Started tunnel tx\n2019-06-23 10:30:28+0000 [-] telem tx: Listen on 14701 for wlx30144a002943\n2019-06-23 10:30:28+0000 [-] video tx: Listen on 5602 for wlx30144a002943\n2019-06-23 10:30:28+0000 [-] telem rx: wlx30144a002943 has DLT_IEEE802_11_RADIO Encap\n2019-06-23 10:30:28+0000 [-] tunnel tx: Listen on 14901 for wlx30144a002943\n2019-06-23 10:30:28+0000 [-] tunnel rx: wlx30144a002943 has DLT_IEEE802_11_RADIO Encap\n2019-06-23 10:30:35+0000 [-] telem rx: Error: socket error!\n2019-06-23 10:30:35+0000 [-] tunnel rx: Error: socket error!\n2019-06-23 10:30:35+0000 [-] Stopped RX telem rx with code 1\n2019-06-23 10:30:35+0000 [-] Stopping reactor due to fatal error: A process has ended with a probable error condition: process ended with exit code 1.\n2019-06-23 10:30:35+0000 [-] (UDP Port 14550 Closed)\n2019-06-23 10:30:35+0000 [-] (UDP Port 14700 Closed)\n2019-06-23 10:30:35+0000 [-] (UDP Port 41855 Closed)\n2019-06-23 10:30:35+0000 [-] Stopped RX tunnel rx with code 1\n2019-06-23 10:30:35+0000 [UDPProxyProtocol (UDP)] (UDP Port 53005 Closed)\n2019-06-23 10:30:35+0000 [UDPProxyProtocol (UDP)] (UDP Port 14900 Closed)\n2019-06-23 10:30:35+0000 [-] Main loop terminated.\n2019-06-23 10:30:35+0000 [-] Exiting with code 1\n\n```","files":null},{"type":6,"timestamp":1561287818,"nonce":"b8XxDdxevICrGWvAPYAd+hjTsTs=","metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDIzOTg2OTg4Ng=="},"target":"de947a1ea69afe98b5dc5ca3fe75872be1372db09eeae866aeb9522bb89b76e7","message":"Да, теперь всё работает. Телеметрия передаётся, туннель работает, видео идёт, но у меня не получается использовать 40mhz bandwidth и 13 канал.\n\nПри попытке переключиться на 40mhz происходит это:\n```\nsudo python -m telemetry.server drone wlx30144a002943\n2019-06-23 10:18:12+0000 [-] Log opened.\n2019-06-23 10:18:12+0000 [-] # iw reg set GY\n2019-06-23 10:18:12+0000 [-] # ifconfig wlx30144a002943 down\n2019-06-23 10:18:12+0000 [-] # iw dev wlx30144a002943 set monitor otherbss\n2019-06-23 10:18:13+0000 [-] # ifconfig wlx30144a002943 up\n2019-06-23 10:18:13+0000 [-] # iw dev wlx30144a002943 set channel 9 HT40+\n2019-06-23 10:18:13+0000 [-] Listen for telem stream 1(RX), 2(TX) on 0.0.0.0:14550\n2019-06-23 10:18:13+0000 [-] UDPProxyProtocol starting on 14550\n2019-06-23 10:18:13+0000 [-] UDPProxyProtocol starting on 14700\n2019-06-23 10:18:13+0000 [-] UDPProxyProtocol starting on 38402\n2019-06-23 10:18:13+0000 [-] Telem RX: /usr/bin/wfb_rx -p 1 -u 14700 -K /etc/drone.key -k 1 -n 2 wlx30144a002943\n2019-06-23 10:18:13+0000 [-] Telem TX: /usr/bin/wfb_tx -p 2 -u 14701 -K /etc/drone.key -B 20 -G long -S 0 -L 0 -M 1 -k 1 -n 2 wlx30144a002943\n2019-06-23 10:18:13+0000 [-] Started telem rx\n2019-06-23 10:18:13+0000 [-] Started telem tx\n2019-06-23 10:18:13+0000 [-] Listen for video stream 3 on 0.0.0.0:5602\n2019-06-23 10:18:13+0000 [-] Started video tx\n2019-06-23 10:18:13+0000 [-] Video: /usr/bin/wfb_tx -p 3 -u 5602 -K /etc/drone.key -B 40 -G short -S 1 -L 0 -M 23 -k 8 -n 12 wlx30144a002943\n2019-06-23 10:18:13+0000 [-] UDPProxyProtocol starting on 14900\n2019-06-23 10:18:13+0000 [-] UDPProxyProtocol starting on 44025\n2019-06-23 10:18:13+0000 [-] Tunnel RX: /usr/bin/wfb_rx -p 4 -u 14900 -K /etc/drone.key -k 1 -n 2 wlx30144a002943\n2019-06-23 10:18:13+0000 [-] Tunnel TX: /usr/bin/wfb_tx -p 5 -u 14901 -K /etc/drone.key -B 20 -G long -S 1 -L 0 -M 1 -k 1 -n 2 wlx30144a002943\n2019-06-23 10:18:13+0000 [-] Started tunnel rx\n2019-06-23 10:18:13+0000 [-] Started tunnel tx\n2019-06-23 10:18:13+0000 [-] telem tx: Listen on 14701 for wlx30144a002943\n2019-06-23 10:18:13+0000 [-] telem rx: wlx30144a002943 has DLT_IEEE802_11_RADIO Encap\n2019-06-23 10:18:13+0000 [-] video tx: Listen on 5602 for wlx30144a002943\n2019-06-23 10:18:13+0000 [-] tunnel tx: Listen on 14901 for wlx30144a002943\n2019-06-23 10:18:13+0000 [-] tunnel rx: wlx30144a002943 has DLT_IEEE802_11_RADIO Encap\n2019-06-23 10:18:13+0000 [-] tunnel rx: New session detected\n2019-06-23 10:18:13+0000 [-] tunnel rx: 484 packets lost\n2019-06-23 10:18:20+0000 [-] tunnel rx: Error: socket error!\n2019-06-23 10:18:20+0000 [-] telem rx: Error: socket error!\n2019-06-23 10:18:20+0000 [-] Stopped RX tunnel rx with code 1\n2019-06-23 10:18:20+0000 [-] Stopping reactor due to fatal error: A process has ended with a probable error condition: process ended with exit code 1.\n2019-06-23 10:18:20+0000 [-] (UDP Port 14900 Closed)\n2019-06-23 10:18:20+0000 [-] (UDP Port 44025 Closed)\n2019-06-23 10:18:20+0000 [UDPProxyProtocol (UDP)] (UDP Port 14550 Closed)\n2019-06-23 10:18:20+0000 [UDPProxyProtocol (UDP)] (UDP Port 14700 Closed)\n2019-06-23 10:18:20+0000 [UDPProxyProtocol (UDP)] (UDP Port 38402 Closed)\n2019-06-23 10:18:20+0000 [-] Stopped RX telem rx with code 1\n2019-06-23 10:18:20+0000 [-] Main loop terminated.\n2019-06-23 10:18:20+0000 [-] Exiting with code 1\n\n```\nПри попытке использования 13го канала\n```\n sudo python -m telemetry.server drone wlx30144a002943\n2019-06-23 10:30:27+0000 [-] Log opened.\n2019-06-23 10:30:27+0000 [-] # iw reg set GY\n2019-06-23 10:30:27+0000 [-] # ifconfig wlx30144a002943 down\n2019-06-23 10:30:27+0000 [-] # iw dev wlx30144a002943 set monitor otherbss\n2019-06-23 10:30:27+0000 [-] # ifconfig wlx30144a002943 up\n2019-06-23 10:30:27+0000 [-] # iw dev wlx30144a002943 set channel 13 HT20\n2019-06-23 10:30:27+0000 [-] Listen for telem stream 1(RX), 2(TX) on 0.0.0.0:14550\n2019-06-23 10:30:27+0000 [-] UDPProxyProtocol starting on 14550\n2019-06-23 10:30:27+0000 [-] UDPProxyProtocol starting on 14700\n2019-06-23 10:30:27+0000 [-] UDPProxyProtocol starting on 41855\n2019-06-23 10:30:27+0000 [-] Telem RX: /usr/bin/wfb_rx -p 1 -u 14700 -K /etc/drone.key -k 1 -n 2 wlx30144a002943\n2019-06-23 10:30:27+0000 [-] Telem TX: /usr/bin/wfb_tx -p 2 -u 14701 -K /etc/drone.key -B 20 -G long -S 0 -L 0 -M 1 -k 1 -n 2 wlx30144a002943\n2019-06-23 10:30:27+0000 [-] Started telem rx\n2019-06-23 10:30:27+0000 [-] Started telem tx\n2019-06-23 10:30:27+0000 [-] Listen for video stream 3 on 0.0.0.0:5602\n2019-06-23 10:30:27+0000 [-] Started video tx\n2019-06-23 10:30:27+0000 [-] Video: /usr/bin/wfb_tx -p 3 -u 5602 -K /etc/drone.key -B 20 -G short -S 1 -L 0 -M 31 -k 8 -n 12 wlx30144a002943\n2019-06-23 10:30:28+0000 [-] UDPProxyProtocol starting on 14900\n2019-06-23 10:30:28+0000 [-] UDPProxyProtocol starting on 53005\n2019-06-23 10:30:28+0000 [-] Tunnel RX: /usr/bin/wfb_rx -p 4 -u 14900 -K /etc/drone.key -k 1 -n 2 wlx30144a002943\n2019-06-23 10:30:28+0000 [-] Tunnel TX: /usr/bin/wfb_tx -p 5 -u 14901 -K /etc/drone.key -B 20 -G long -S 1 -L 0 -M 1 -k 1 -n 2 wlx30144a002943\n2019-06-23 10:30:28+0000 [-] Started tunnel rx\n2019-06-23 10:30:28+0000 [-] Started tunnel tx\n2019-06-23 10:30:28+0000 [-] telem tx: Listen on 14701 for wlx30144a002943\n2019-06-23 10:30:28+0000 [-] video tx: Listen on 5602 for wlx30144a002943\n2019-06-23 10:30:28+0000 [-] telem rx: wlx30144a002943 has DLT_IEEE802_11_RADIO Encap\n2019-06-23 10:30:28+0000 [-] tunnel tx: Listen on 14901 for wlx30144a002943\n2019-06-23 10:30:28+0000 [-] tunnel rx: wlx30144a002943 has DLT_IEEE802_11_RADIO Encap\n2019-06-23 10:30:35+0000 [-] telem rx: Error: socket error!\n2019-06-23 10:30:35+0000 [-] tunnel rx: Error: socket error!\n2019-06-23 10:30:35+0000 [-] Stopped RX telem rx with code 1\n2019-06-23 10:30:35+0000 [-] Stopping reactor due to fatal error: A process has ended with a probable error condition: process ended with exit code 1.\n2019-06-23 10:30:35+0000 [-] (UDP Port 14550 Closed)\n2019-06-23 10:30:35+0000 [-] (UDP Port 14700 Closed)\n2019-06-23 10:30:35+0000 [-] (UDP Port 41855 Closed)\n2019-06-23 10:30:35+0000 [-] Stopped RX tunnel rx with code 1\n2019-06-23 10:30:35+0000 [UDPProxyProtocol (UDP)] (UDP Port 53005 Closed)\n2019-06-23 10:30:35+0000 [UDPProxyProtocol (UDP)] (UDP Port 14900 Closed)\n2019-06-23 10:30:35+0000 [-] Main loop terminated.\n2019-06-23 10:30:35+0000 [-] Exiting with code 1\n\n```","files":null}]}