{"author":{"id":"ebc3e296d230ac986f4588d5193ab5c9d24af973ad5f0001964fd3728e6e5de2"},"ops":[{"type":1,"timestamp":1736719005,"nonce":"+aAp7BHs1/HNGQQ60G+9qtefR/I=","metadata":{"github-id":"I_kwDOBLCY8M6l3NSF","github-url":"https://github.com/svpcom/wfb-ng/issues/397","origin":"github"},"title":"[BUG] wfb-ng-cluster-manager ssh uses bash","message":"**Describe the bug**\nWhen running the wfb-cluster-manager service with the --ssh flag, it successfully connects to the openWRT router over ssh, however it tries to use bash [here](https://github.com/svpcom/wfb-ng/blob/4610a7110aa0326956a65e43e105092e06cfc631/wfb_ng/server.py#L152C1-L160C59) causing it to fail.\n\n```\n                if ssh_user and ssh_port:\n                    dl.append(SSHClientProtocol(node,\n                                                ssh_user,\n                                                '/bin/bash',\n                                                key=ssh_key,\n                                                port=ssh_port,\n                                                use_agent=ssh_key is None,\n                                                stdin=setup_script).start()\\\n                              .addBoth(_ssh_exited, node))\n\n```\nwhen busybox's shell uses ash.\n\n**To Reproduce**\n```sudo systemctl start wfb-cluster-manager@```\n\n**Expected behavior**\nConnect to the shell successfully \n\n**Screenshots**\nIf applicable, add screenshots to help explain your problem.\n\n**Your setup (please complete the following information):**\n - OS [e.g. Ubuntu 18.04, Raspbian]\n OpenWRT 24.10\n - Hardware [e.g. x86, rpi, nanopi neo2 ]\n TP-Link EAP225\n - WiFi cards [e.g. rt28xx, rtl8812au]\n QCA9561\n - WiFi drivers [e.g. stock, patched from http://.. ]\n\n**Additional context**\nRemoving a single letter and rebuilding the .deb solves this.\n``` '/bin/ash', ```\n\n**Confirm you read**\n- [ ]  https://github.com/svpcom/wfb-ng/blob/master/README.md\n- [ ]  https://github.com/svpcom/wfb-ng/wiki/Setup-HOWTO","files":null}]}