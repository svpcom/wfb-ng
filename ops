{"author":{"id":"ae26fac8ccb805db2175a5f68935360a1ba4e71a79a9becc27bb2b263dab90bc"},"ops":[{"type":1,"timestamp":1561205118,"nonce":"AjoE2xdItKda9z2Sr6548hRRjCE=","metadata":{"github-id":"MDU6SXNzdWU0NTk0Njc2Mzc=","github-url":"https://github.com/svpcom/wfb-ng/issues/40","origin":"github"},"title":"Не приходят данные.","message":"Привет. \nПытаюсь настроить передачу видео и телеметрии с одноплатного ПК на ноутбук с Ubuntu.\nПосле установки по [этому](https://github.com/svpcom/wifibroadcast/wiki/Setup-HOWTO) гайду не получаю данных. \n`$ wfb-cli gs` показывает  Connection failed.\nПосле прочтения [Troubleshooting](https://github.com/svpcom/wifibroadcast/wiki/Troubleshooting) попробовал использовать скрипты и обнаружил интересную деталь. При передаче с ноутбука данные передаются, echo test приходит. В обратную сторону не работает.\nДумал что у меня что-то не так с портами, везде поменял 5600 на 5606, не помогло.\n\nВывод `sudo scripts/rx_standalone.sh wlx30144a0024e0` \n```\nSetting wlx30144a0024e0 to channel 9\nwlx30144a0024e0 has DLT_IEEE802_11_RADIO Encap\n8037130\tPKT\t0:0:0:0:0:0\n8038132\tPKT\t0:0:0:0:0:0\n8039132\tPKT\t0:0:0:0:0:0\n8040134\tPKT\t0:0:0:0:0:0\n8041135\tPKT\t0:0:0:0:0:0\n8042136\tPKT\t0:0:0:0:0:0\n8043138\tPKT\t0:0:0:0:0:0\n8044139\tPKT\t0:0:0:0:0:0\n```\nПакеты от `echo test | nc -u 127.0.0.1 5606` не доходят.\n`$ tcpdump` на стороне tx в момент отправки `$ echo test` выдаёт такое:\n```\n11:30:17.345399 [bit 15] 13:22:33:44:55:01 Unknown SSAP 0x84 \u003e 13:22:33:44:55:01 802.1B I Supervisory, Reject, rcv seq 73, Flags [Final], length 73\n11:30:17.345494 [bit 15] 13:22:33:44:55:01 \u003e 13:22:33:44:55:01 Null Information, send seq 0, rcv seq 0, Flags [Command], length 32\n\t0x0000:  0100 0000 0000 0000 002c df6f b238 3c07  .........,.o.8\u003c.\n\t0x0010:  eab8 4a18 901c d77a 5eea fe86 9dcb 43e5  ..J....z^.....C.\n\n```\nС обеих сторон в /etc/NetworkManager/NetworkManager.conf\ntx:\n```\n[main]\nplugins=ifupdown,keyfile\n\n[ifupdown]\nmanaged=false\n\n[keyfile]\nunmanaged-devices=interface-name:wlx30144a002943\n```\nrx:\n```\n[main]\nplugins=ifupdown,keyfile\n\n[ifupdown]\nmanaged=false\n\n[device]\nwifi.scan-rand-mac-address=no\n\n[keyfile]\nunmanaged-devices=interface-name:wlx30144a0024e0\n\n```\nВывод strace tx:\n```\nrock64@rock64:~$ ps uaxw | grep tx\nroot      3566  0.0  0.0   8148  3320 pts/1    S+   11:29   0:00 sudo scripts/tx_standalone.sh wlx30144a002943\nroot      3567  0.0  0.0   5924  2800 pts/1    S+   11:29   0:00 /bin/bash scripts/tx_standalone.sh wlx30144a002943\nroot      3622  0.0  0.0   7288  1452 pts/1    S+   11:29   0:00 ./wfb_tx -p 1 -u 5606 -K drone.key wlx30144a002943\nrock64    4314  0.0  0.0   5524   564 pts/3    S+   11:49   0:00 grep tx\nrock64@rock64:~$ sudo strace -ff -p 3622\n\nstrace: Process 3622 attached\nppoll([{fd=3, events=POLLIN}], 1, NULL, NULL, 0) = 1 ([{fd=3, revents=POLLIN}])\nrecvfrom(3, \"test\\n\", 1446, 0, NULL, NULL) = 5\nsendto(4, \"\\0\\0\\r\\0\\0\\200\\10\\0\\10\\0007\\0\\1\\10\\1\\0\\0\\377\\377\\377\\377\\377\\377\\23\\\"3DU\\1\\23\\\"3\"..., 110, 0, NULL, 0) = 110\nsendto(4, \"\\0\\0\\r\\0\\0\\200\\10\\0\\10\\0007\\0\\1\\10\\1\\0\\0\\377\\377\\377\\377\\377\\377\\23\\\"3DU\\1\\23\\\"3\"..., 69, 0, NULL, 0) = 69\nrecvfrom(3, 0x7ffda48ba8, 1446, 0, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)\nppoll([{fd=3, events=POLLIN}], 1, NULL, NULL, 0\n\n```\nЧто бы я не делал данные не доходят.\nНа tx стороне Rock64 Debian stretch\nНа rx ноутбук Ubuntu 18.4.2\nС обеих сторон используется китайский адаптер на AR9271. \n\nКстати, при использовании wifibroadcast от befinitiv передача видео работает, что наталкивает меня на мысль что с железом проблем у меня нету.\n\nБуду очень рад любой помощи.","files":null}]}